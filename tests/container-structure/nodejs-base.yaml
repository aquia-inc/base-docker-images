schemaVersion: 2.0.0

# Test Node.js base image functionality
commandTests:
  - name: "Node.js version check"
    command: "node"
    args: ["--version"]
    expectedOutput: ["v24."]
    
  - name: "NPM is available"
    command: "npm"
    args: ["--version"]
    expectedOutput: ["11."]
    
  - name: "User is nobody"
    command: "id"
    args: ["-un"]
    expectedOutput: ["nobody"]

fileExistenceTests:
  - name: "Version file exists"
    path: "/tmp/versions.txt" 
    shouldExist: true

fileContentTests:
  - name: "Version file contains Node.js version"
    path: "/tmp/versions.txt"
    expectedContents: ["nodejs=24."]
    
  - name: "Version file contains major tag"
    path: "/tmp/versions.txt"
    expectedContents: ["nodejs_major_tag=24"]

metadataTest:
  user: "nobody"